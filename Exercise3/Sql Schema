CREATE DATABASE article;

CREATE TABLE `user` ( `id` integer(255) NOT NULL AUTO_INCREMENT, `role` ENUM ('admin','normal') NOT NULL,
`name` varchar(255) NOT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `user` ( `role`,`name`) VALUES
('admin','User1'),
('normal','User2'),
('normal','User3'),
('normal','User4');

CREATE TABLE `category` (
  `id` integer(255) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


INSERT INTO `category` (`name`) VALUES
('sports'),
('politics'),
('science'),
('history');


CREATE TABLE `article` ( `user_id` int(255) NOT NULL, `id` int(255) NOT NULL AUTO_INCREMENT, 
`description` text(255) NOT NULL, `category_id` int(255) NOT NULL, PRIMARY KEY(id) ) 
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

ALTER TABLE `article` ADD CONSTRAINT `article_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);

ALTER TABLE `article` ADD CONSTRAINT `article_id_2` FOREIGN KEY (`category_id`) REFERENCES `category` (`id`);




INSERT INTO `article` (`user_id`, `description`,`category_id`) VALUES
('3', 'it is category 1 sports cricket is a very famous sport in India','1'),
('3', 'it category 3 science plants release co2 at night','3'),
('3', 'it is category 2 politics xyaaaaaz','2'),
('2', 'it is category 1 sports tennis requires lot\'s of stamina','1'),
('4', 'it is category 4 history 1947 independence','4');


CREATE TABLE `comments` ( `article_id` integer(255) NOT NULL, `user_id` integer(255) NOT NULL, 
`id` integer(255) NOT NULL AUTO_INCREMENT, `description` text(255) NOT NULL, PRIMARY KEY(id) ) 
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


ALTER TABLE `comments`
  ADD CONSTRAINT `comments_id` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`);

ALTER TABLE `comments`
  ADD CONSTRAINT `comments_id_2` FOREIGN KEY (`article_id`) REFERENCES `article` (`id`);


INSERT INTO `comments` (`article_id`,`user_id`, `description`) VALUES
('1','2', 'article is very gud'),
('1','2', 'article is very interesting'),
('1','4', 'nice article'),
('5','3','nicely written'),
('2','4', 'good work');


CREATE INDEX i1 ON user(id);
CREATE INDEX i2 ON user(name);

CREATE INDEX i3 ON category(id);
CREATE INDEX i4 ON category(name);


CREATE INDEX i5 ON article(id);
CREATE INDEX i6 ON article(user_id);
CREATE INDEX i7 ON article(category_id);


CREATE INDEX i5 ON comments(id);
CREATE INDEX i6 ON comments(user_id);
CREATE INDEX i7 ON comments(article_id);

